<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="general :: generalHead"/>
<body>

<nav th:replace="general :: navbar"></nav>

<div class="container-fluid">
    <form th:action="@{/alma/showImportFiles}" method="post" th:object="${almaExportRun}">
        <div class="ui-g">
            <div class="ui-g-12 ui-md-12 ui-lg-10 ui-lg-offset-1">
                <div class="tile centered">
                    <h3 style="height:1.2em;" th:text="#{sap.run.result}"></h3>
                    <p>Lauf vom <span th:text="${#dates.format(almaExportRun.lastRun, 'dd.MM.yyyy')}"></span>
                        f√ºr den Campus <span th:text="${almaExportRun.invoiceOwner}"></span> vom
                        <span th:text="${#dates.format(almaExportRun.desiredDate, 'dd.MM.yyyy')}"></span>, Nummer <span
                                th:text="${almaExportRun.runIndex}"></span></p>
                    <input hidden th:field="*{dateSpecific}">
                    <input hidden th:field="*{desiredDate}">
                    <input hidden th:field="*{numberForeignSapData}">
                    <input hidden th:field="*{numberHomeSapData}">
                    <input hidden th:field="*{invoiceOwner}">
                    <table class="table table-borderless text-left">
                        <tr>
                            <th th:text="#{sap.result.number.invoices}"></th>
                            <td th:text="${almaExportRun.numberInvoices}"></td>
                            <th th:text="#{sap.result.number.created.sapdata.home}"></th>
                            <td th:text="${almaExportRun.homeSapData.size()}"></td>
                            <th style="text-align: center;"><span style="font-size: larger; font-weight: bold;"
                                                                  th:text="#{sap.result.number.missedsapdata}"></span>:
                            </th>
                        </tr>
                        <tr>
                            <th th:text="#{sap.result.number.invoicelines}"></th>
                            <td th:text="${almaExportRun.numberInvoiceLines}"></td>
                            <th th:text="#{sap.result.number.created.sapdata.foreign}"></th>
                            <td th:text="${almaExportRun.foreignSapData.size()}"></td>
                            <td style="text-align: center;"><span
                                    style="color: darkred; font-size: larger; font-weight: bold;"
                                    th:text="${almaExportRun.missedSapData}"></span></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="ui-g">
            <div class="ui-g-12 ui-md-12 ui-lg-12">
                <div class="tile centered">
                    <h2 th:text="#{sap.title.home}"></h2>
                    <table class="table table-striped text-left">
                        <tr>
                            <th th:text="#{sap.result.vendorcode}"></th>
                            <th th:text="#{sap.result.creditor}"></th>
                            <th th:text="#{sap.result.date.invoice}"></th>
                            <th th:text="#{sap.result.date.processing}"></th>
                            <th th:text="#{sap.result.costtype}"></th>
                            <th th:text="#{sap.result.amount}"></th>
                            <th th:text="#{sap.result.currency}"></th>
                            <th th:text="#{sap.result.invoicenumber}"></th>
                            <th th:text="#{sap.result.invoicelinenumber}"></th>
                            <th th:text="#{sap.result.briefcode}"></th>
                            <th th:text="#{sap.result.comment}"></th>
                            <th th:text="#{sap.result.checkcode}"></th>
                            <th th:text="#{sap.result.date.from}"></th>
                            <th th:text="#{sap.result.date.to}"></th>
                            <th th:text="#{sap.result.checked}"></th>
                        </tr>
                        <tr th:each="sapDatumHome, itemStathome : *{homeSapData}" th:style="${sapDatumHome.costType == null or sapDatumHome.costType.isEmpty() or sapDatumHome.creditor == null or sapDatumHome.creditor.isEmpty() or sapDatumHome.invoiceNumber == null or sapDatumHome.invoiceNumber.length() > 16 ? 'background-color: pink' : 'background-color: transparent'}">

                            <td th:text="${sapDatumHome.vendorCode}"></td>
                            <td th:style="${sapDatumHome.creditor == null or sapDatumHome.creditor.isEmpty() ? 'background-color: HotPink' : 'background-color: transparent'}" th:text="${sapDatumHome.creditor}"></td>
                            <td th:text="${#dates.format(sapDatumHome.invoiceDate, 'dd.MM.yyyy')}"></td>
                            <td th:text="${#dates.format(sapDatumHome.commitmentDate, 'dd.MM.yyyy')}"></td>
                            <td th:style="${sapDatumHome.costType == null or sapDatumHome.costType.isEmpty() ? 'background-color: HotPink' : 'background-color: transparent'}" th:text="${sapDatumHome.costType}"></td>
                            <td th:text="${#numbers.formatDecimal(sapDatumHome.invoiceAmount,1,2)}"></td>
                            <td th:text="${sapDatumHome.currency}"></td>
                            <td th:style="${sapDatumHome.invoiceNumber == null or sapDatumHome.invoiceNumber.length() > 16 ? 'background-color: HotPink' : 'background-color: transparent'}" th:text="${sapDatumHome.invoiceNumber}"></td>
                            <td th:text="${sapDatumHome.positionalNumber}"></td>
                            <td th:text="${sapDatumHome.getCheckCharacter()}"></td>
                            <td style="word-wrap: break-word;min-width: 160px;max-width: 160px;" th:text="${sapDatumHome.comment}"></td>
                            <td th:text="${sapDatumHome.sapAccountData.getImportCheckString()}"></td>
                            <td th:text="${#dates.format(sapDatumHome.fromDate, 'dd.MM.yyyy')}"></td>
                            <td th:text="${#dates.format(sapDatumHome.toDate, 'dd.MM.yyyy')}"></td>
                            <td>
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].vendorCode}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].sapAccountData.costCentre}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].sapAccountData.fonds}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].sapAccountData.ledgerAccount}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].sapAccountData.pspElement}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].creditor}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].invoiceDate}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].commitmentDate}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].costType}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].invoiceAmount}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].currency}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].invoiceNumber}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].positionalNumber}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].comment}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].fromDate}">
                                <input hidden th:field="*{homeSapData[__${itemStathome.index}__].toDate}">
                                <input th:field="*{homeSapData[__${itemStathome.index}__].isChecked}"
                                       th:checked="*{homeSapData[__${itemStathome.index}__].isChecked}" type="checkbox">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="ui-g-12 ui-md-12 ui-lg-12">
                <div class="tile centered">
                    <h2 th:text="#{sap.title.foreign}"></h2>
                    <table class="table table-striped text-left">
                        <tr>
                            <th th:text="#{sap.result.vendorcode}"></th>
                            <th th:text="#{sap.result.creditor}"></th>
                            <th th:text="#{sap.result.date.invoice}"></th>
                            <th th:text="#{sap.result.date.processing}"></th>
                            <th th:text="#{sap.result.costtype}"></th>
                            <th th:text="#{sap.result.amount}"></th>
                            <th th:text="#{sap.result.currency}"></th>
                            <th th:text="#{sap.result.invoicenumber}"></th>
                            <th th:text="#{sap.result.invoicelinenumber}"></th>
                            <th th:text="#{sap.result.briefcode}"></th>
                            <th th:text="#{sap.result.comment}"></th>
                            <th th:text="#{sap.result.checkcode}"></th>
                            <th th:text="#{sap.result.date.from}"></th>
                            <th th:text="#{sap.result.date.to}"></th>
                            <th th:text="#{sap.result.checked}"></th>
                        </tr>
                        <tr th:each="sapDatum, itemStat : *{foreignSapData}" th:style="${sapDatum.costType == null or sapDatum.costType.isEmpty() or sapDatum.creditor == null or sapDatum.creditor.isEmpty() or sapDatum.invoiceNumber == null or sapDatum.invoiceNumber.length() > 16 ? 'background-color: pink' : 'background-color: transparent'}">
                            <td th:text="${sapDatum.vendorCode}"></td>
                            <td th:style="${sapDatum.creditor == null or sapDatum.creditor.isEmpty() ? 'background-color: HotPink' : 'background-color: transparent'}" th:text="${sapDatum.creditor}"></td>
                            <td th:text="${#dates.format(sapDatum.invoiceDate, 'dd.MM.yyyy')}"></td>
                            <td th:text="${#dates.format(sapDatum.commitmentDate, 'dd.MM.yyyy')}"></td>
                            <td th:style="${sapDatum.costType == null or sapDatum.costType.isEmpty() ? 'background-color: HotPink' : 'background-color: transparent'}" th:text="${sapDatum.costType}"></td>
                            <td th:text="${#numbers.formatDecimal(sapDatum.invoiceAmount,1,2)}"></td>
                            <td th:text="${sapDatum.currency}"></td>
                            <td th:style="${sapDatum.invoiceNumber == null or sapDatum.invoiceNumber.length() > 16 ? 'background-color: HotPink' : 'background-color: transparent'}" th:text="${sapDatum.invoiceNumber}"></td>
                            <td th:text="${sapDatum.positionalNumber}"></td>
                            <td th:text="${sapDatum.getCheckCharacter()}"></td>
                            <td style="word-wrap: break-word;min-width: 160px;max-width: 160px;" th:text="${sapDatum.comment}"></td>
                            <td th:text="${sapDatum.sapAccountData.getImportCheckString()}"></td>
                            <td th:text="${#dates.format(sapDatum.fromDate, 'dd.MM.yyyy')}"></td>
                            <td th:text="${#dates.format(sapDatum.toDate, 'dd.MM.yyyy')}"></td>
                            <td>
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].vendorCode}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].sapAccountData.costCentre}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].sapAccountData.fonds}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].sapAccountData.ledgerAccount}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].sapAccountData.pspElement}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].creditor}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].invoiceDate}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].commitmentDate}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].costType}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].invoiceAmount}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].currency}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].invoiceNumber}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].comment}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].positionalNumber}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].fromDate}">
                                <input hidden th:field="*{foreignSapData[__${itemStat.index}__].toDate}">
                                <input th:field="*{foreignSapData[__${itemStat.index}__].isChecked}"
                                       th:checked="*{foreignSapData[__${itemStat.index}__].isChecked}" type="checkbox">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="ui-g-12 ui-md-12 ui-lg-12">
            <div style="margin: auto;" class="tile centered">
                <input type="submit" class="btn btn-primary" th:value="#{invoices.collect.open}"/>
            </div>
        </div>
    </form>
</div>

</body>
</html>